<div metal:use-macro="load: layout.pt">
  <div class="container px-4 px-lg-5 h-100"
       metal:fill-slot="masthead"
  >
    <div class="row gx-1 gx-lg-1 h-100 align-items-start justify-content-start opacity-90 bg-light">

      <table class="table"
             id="diagrams"
      >
        <thead class="thead-light">
          <tr>
            <th scope="col">Short ID</th>
            <th scope="col">Title</th>
            <th scope="col">Created at</th>
            <th scope="col">Updated at</th>
            <th scope="col">Is public</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="diagram page_listing.items">
            <th scope="row"><a class="link-secondary link-underline-light"
                 href="${request.route_url('diagram_view_editor', diagram_id=diagram.id)}"
              >${diagram.short_id}</a></th>
            <td><a class="link-secondary link-underline-light"
                 href="${request.route_url('diagram_view_editor', diagram_id=diagram.id)}"
              >${diagram.title}</a></td>
            <td>${diagram.created_at}</td>
            <td>${diagram.updated_at}</td>
            <td>${diagram.is_public}</td>
          </tr>
        </tbody>

      </table>
      <nav aria-label="Diagrams pagination">
        <ul class="pagination">
          <li class="page-item"
              tal:attributes="
                class python: 'page-item disabled' if page_listing.current_page == 1 else 'page-item';
              "
          >
            <a class="page-link"
               href="${request.route_url('diagrams', _query=dict(page=page_listing.previous_page))}"
            >Previous</a>
          </li>
          <li class="page-item disabled">
            <a class="page-link">Page
              <span tal:content="page_listing.current_page">1</span>
               of
              <span tal:content="page_listing.num_pages">1</span></a>
          </li>
          <li class="page-item"
              tal:condition="python: page_listing.has_next"
          ><a class="page-link"
               href="${request.route_url('diagrams', _query=dict(page=page_listing.next_page))}"
            >Next</a></li>
        </ul>
      </nav>

    </div>
  </div>

  <metal metal:fill-slot="scripts"
         tal:omit-tag=""
  >

  </metal>

</div>
